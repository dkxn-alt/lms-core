generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model books {
  id         String    @id @default(uuid()) @db.Uuid
  title      String
  author     String
  available  Boolean?  @default(true)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)
  loans      loans[]
}

model loans {
  id          String    @id @default(uuid()) @db.Uuid
  member_id   String    @db.Uuid
  book_id     String    @db.Uuid
  borrowed_at DateTime  @default(now()) @db.Timestamptz(6)
  returned_at DateTime? @db.Timestamptz(6)
  books       books?    @relation(fields: [book_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  members     members?  @relation(fields: [member_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model members {
  id        String    @id @default(uuid()) @db.Uuid
  name      String
  email     String    @unique
  active    Boolean?  @default(true)
  joined_at DateTime? @default(now()) @db.Timestamptz(6)
  loans     loans[]
}
